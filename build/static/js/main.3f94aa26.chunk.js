(this.webpackJsonpyes=this.webpackJsonpyes||[]).push([[0],{58:function(e,t,n){"use strict";n.r(t);var c,r=n(0),a=n(43),l=n(22),i=n(8),o={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",overflowY:"auto"},s={display:"flex",alignItems:"flex-end",justifyContent:"flex-start",flexWrap:"wrap",padding:"10px",height:"28rem"},u={maxWidth:"47rem",display:"flex",flexDirection:"column",padding:"5px",justifyContent:"center",alignItems:"stretch",minHeight:"100%",marginLeft:"1rem"},f={position:"static",backgroundColor:"#000",margin:0,display:"flex",alignItems:"center",justifyContent:"center"},x={display:"flex",flexDirection:"column"},d=n(82),h=n(83),m=n(84),y=n(80),b=n.p+"static/media/cell1.350a4099.svg",g=n.p+"static/media/cell2.de22f9f4.svg",j=n.p+"static/media/cell3.6fcc0c3d.svg",p=n(9);!function(e){e.Left="Left",e.Up="Up",e.Right="Right",e.Down="Down"}(c||(c={}));var v=300,O=37.5,C=[{size:3,quantity:1},{size:2,quantity:2},{size:1,quantity:3}],S=[],M=function(e){return e[0][2].x===e[0][0].x&&e[0][2].y===e[0][0].y},k=function(e){var t=e.context,n=e.cellSize,c=e.x,r=e.y;t.beginPath(),t.strokeStyle="#aaa",t.strokeRect(c*n,r*n,n,n),t.closePath()},P=function(e){var t=e.cell,n=e.engagedCells;return n&&n.some((function(e){var n=e.x,c=e.y;return n===t.x&&c===t.y}))},E=function(e){var t=e.context,n=e.cellSize,c=e.x,r=e.y;t.beginPath(),t.rect((c-1)*n,(r-1)*n,n,n),t.closePath(),t.fillStyle="#ddd",t.fill(),t.stroke()},w=function(e,t,n){n&&n.forEach((function(n){var c=n.x,r=n.y;e.beginPath(),e.arc(c*t-t/2,r*t-t/2,4,0,2*Math.PI),e.fillStyle="rgb(57, 57, 97)",e.stroke(),e.fill(),e.closePath()}))},I=function(e,t){for(var n=1,c=[],r={};n<=e;)r={x:Math.round(Math.random()*(t-1)+1),y:Math.round(Math.random()*(t-1)+1)},c.push(r),n++;return c},z=function(e,t,n){n&&n.forEach((function(n){var c=n.x,r=n.y;E({context:e,cellSize:t,x:c,y:r}),e.beginPath(),e.moveTo((c-1)*t,(r-1)*t),e.lineTo(c*t,r*t),e.moveTo((c-1)*t+t,(r-1)*t),e.lineTo(c*t-t,r*t),e.strokeStyle="blue",e.fillStyle="rgb(255, 82, 82)",e.fillRect((c-1)*t,(r-1)*t,t,t),e.stroke(),e.closePath()}))},R=function(e){var t=e.cell,n=e.dimMatr;return t.x>0&&t.x<=n&&t.y>0&&t.y<=n},B=function(e,t,n){for(var c,r=[],a=0;a<e.length;a++)r.push({x:e[a].x,y:e[a].y}),r.push({x:e[a].x-1,y:e[a].y-1}),r.push({x:e[a].x,y:e[a].y-1}),r.push({x:e[a].x+1,y:e[a].y-1}),r.push({x:e[a].x+1,y:e[a].y}),r.push({x:e[a].x+1,y:e[a].y+1}),r.push({x:e[a].x,y:e[a].y+1}),r.push({x:e[a].x-1,y:e[a].y+1}),r.push({x:e[a].x-1,y:e[a].y});return(c=r,c.filter((function(e,t,n){return t===n.findIndex((function(t){return t.x===e.x&&t.y===e.y}))}))).filter((function(e){return R({cell:e,dimMatr:n})&&!P({cell:e,engagedCells:t})}))},T=function(e,t){var n,r=[],a=[],l=[];return e.forEach((function(e){for(var i=e.size,o=e.quantity,s=1;s<=o;s++){for(var u=[],f=1;f<=i;)if(1===f){u=[],l=Object.keys(c).map((function(e){return{sort:Math.random(),direction:e}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.direction}));var x={};do{x={x:Math.round(Math.random()*(t-1)+1),y:Math.round(Math.random()*(t-1)+1)}}while(P({cell:x,engagedCells:a}));u.push(x),f++}else if(2===f){var d={};do{switch(n=l.pop()){case c.Left:var h={x:u[0].x-1,y:u[0].y};R({cell:h,dimMatr:t})&&!P({cell:h,engagedCells:a})&&(d=h);break;case c.Up:var m={x:u[0].x,y:u[0].y-1};R({cell:m,dimMatr:t})&&!P({cell:m,engagedCells:a})&&(d=m);break;case c.Right:var y={x:u[0].x+1,y:u[0].y};R({cell:y,dimMatr:t})&&!P({cell:y,engagedCells:a})&&(d=y);break;case c.Down:var b={x:u[0].x,y:u[0].y+1};R({cell:b,dimMatr:t})&&!P({cell:b,engagedCells:a})&&(d=b)}}while(Object.keys(d).length&&l.length);Object.keys(d).length?(u.push(d),f++):f=1}else{var g={};switch(n){case c.Left:var j={x:u[f-1-1].x-1,y:u[f-1-1].y};R({cell:j,dimMatr:t})&&!P({cell:j,engagedCells:a})&&(g=j);break;case c.Up:var v={x:u[f-1-1].x,y:u[f-1-1].y-1};R({cell:v,dimMatr:t})&&!P({cell:v,engagedCells:a})&&(g=v);break;case c.Right:var O={x:u[f-1-1].x+1,y:u[f-1-1].y};R({cell:O,dimMatr:t})&&!P({cell:O,engagedCells:a})&&(g=O);break;case c.Down:var C={x:u[f-1-1].x,y:u[f-1-1].y+1};R({cell:C,dimMatr:t})&&!P({cell:C,engagedCells:a})&&(g=C)}Object.keys(g).length?(u.push(g),f++):f=1}var S=B(u,a,t);a.push.apply(a,Object(p.a)(S)),r.push(u)}})),r},A=n(3),D="player",L=700,F=function(e){var t=e.name,n=e.nameBoard,c=e.gameIsFinished,a=e.playerShips,l=e.compShips,o=e.coords,s=Object(r.useState)([]),u=Object(i.a)(s,2),f=u[0],x=u[1],d=Object(r.useState)([]),h=Object(i.a)(d,2),m=h[0],y=h[1],b=Object(r.useState)([]),g=Object(i.a)(b,2),j=g[0],C=g[1],M=Object(r.useState)([]),R=Object(i.a)(M,2),B=R[0],T=R[1],F=a&&a.flat().length,W=l&&l.flat().length,q=Object(r.useState)(F),U=Object(i.a)(q,2),H=U[0],J=U[1],Y=Object(r.useState)(W),N=Object(i.a)(Y,2),X=N[0],G=N[1],K=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=null;K.current&&(e=K.current);var t=e.getContext("2d");null===t||void 0===t||t.scale(1,1)}),[]);var Q=Object(r.useCallback)((function(){if(0!==X&&0!==H&&D!==t&&"computer"===D){var e=function(){for(var e=0,t=I(1,8)[0],n=S.map((function(e){var n=e.x,c=e.y;return n===t.x&&c===t.y})).find((function(e){return!0===e}));void 0!==n&&!0===n&&e<1;)S.pop(),t=I(1,8)[0],e++;return S.push(t),t}();if(P({cell:e,engagedCells:a&&a.flat()})){if(P({cell:e,engagedCells:f}))return;f.push(e),x(Object(p.a)(f)),J(H-1),D="computer"}else{if(P({cell:e,engagedCells:B}))return;B.push(e),T(Object(p.a)(B)),D="player"}}}),[H,X,t,B,a,f]);Object(r.useEffect)((function(){var e=null;return K.current&&(e=K.current),function(e){e.clearRect(0,0,v,v),function(e){for(var t=e.context,n=e.cellSize,c=e.dimMatr,r=0;r<c;r++)for(var a=0;a<c;a++)k({context:t,cellSize:n,x:r,y:a})}({context:e,cellSize:O,dimMatr:8}),function(e,t){e.beginPath(),e.clearRect(0,340,300,60),e.rect(0,340,300,60),e.fillStyle="burlywood",e.fill(),e.fillStyle="blue",e.font="italic 12pt Arial",e.fillText("".concat(t),40,360),e.closePath()}(e,n),function(e,t){var n=15;e.beginPath(),e.fillStyle="blue",e.font="italic 12pt Arial",t.forEach((function(t){e.fillText("".concat(t),n,320),n+=37})),e.closePath()}(e,o.letterCoords),function(e,t){var n=24;e.beginPath(),e.fillStyle="blue",e.font="italic 13pt Arial",t.forEach((function(t){e.fillText("".concat(t),306,n),n+=38})),e.closePath()}(e,o.numberCoords),function(e,t,n,c){var r="computer"===t?0===n&&"\u0412\u044b \u043f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c!!!":0===c&&"\u041a\u043e\u043c\u043f\u0443\u0442\u0435\u0440 \u043a\u0440\u0430\u0441\u0430\u0432\u0447\u0438\u043a!!!";r&&(e.beginPath(),e.clearRect(0,340,300,60),e.rect(0,340,300,60),e.fillStyle="burlywood",e.fill(),e.fillStyle="rgb(158, 0, 0)",e.font="italic 20pt Arial",e.fillText("".concat(r),10,370),e.closePath())}(e,t,X,H),function(e,t,n,c){var r="computer"===t?n:c;e.beginPath(),e.fillStyle="blue",e.font="italic 11pt Arial",e.fillText("\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0438\u0442\u044c: ".concat(r),10,395),e.closePath()}(e,t,X,H),function(e,t,n){n&&n.flat().forEach((function(n){var c=n.x,r=n.y;return E({context:e,cellSize:t,x:c,y:r})}))}(e,O,a),z(e,O,f),z(e,O,m),w(e,O,j),w(e,O,B)}(e.getContext("2d")),"computer"===D&&K.current.addEventListener("click",Q),function(){var t;return null===(t=e)||void 0===t?void 0:t.removeEventListener("click",Q)}}),[f,m,j,B,Q,a,l]),Object(r.useEffect)((function(){if(c)return x([]),y([]),C([]),T([]),J(F),G(W),void(D="player")}),[f,m,j,B,c,W,F]);return Object(r.useEffect)((function(){H&&H<8&&H>=6&&(L=500),H&&H<6&&H>=4&&(L=300),H&&H<4&&H>=2&&(L=100),H&&H<2&&(L=50)}),[H]),Object(r.useEffect)((function(){var e=setInterval(Q,L);return function(){return clearInterval(e)}}),[Q]),Object(A.jsx)(A.Fragment,{children:Object(A.jsx)("canvas",{ref:K,style:"computer"===t?{cursor:"crosshair",margin:"0 3rem .1rem 0"}:{cursor:"progress",marginBottom:".1rem"},width:370,height:400,onClick:function(e){var n,c;if(0!==X&&0!==H&&(D!==t&&"player"===D)){var r=e.nativeEvent,a=r.offsetX,i=r.offsetY;if(a>=300||i>=300)return;var o=(n=a,c=i,{x:Math.ceil(n/O/1),y:Math.ceil(c/O/1)});if(P({cell:o,engagedCells:l.flat()})){if(P({cell:o,engagedCells:m}))return;y([].concat(Object(p.a)(m),[o])),G(X-1),D="player"}else{if(P({cell:o,engagedCells:j}))return;C([].concat(Object(p.a)(j),[o])),D="computer"}}}})})},W=Object(r.memo)(F),q=function(){var e=Object(r.useState)(T(C,8)),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(T(C,8)),p=Object(i.a)(a,2),v=p[0],O=p[1],S=Object(r.useState)(!1),k=Object(i.a)(S,2),P=k[0],E=k[1],w=Object(r.useMemo)((function(){return function(e){for(var t=[],n=[],c=1;c<=e;c++)t.push(String.fromCharCode(64+c)),n.push(c);return{letterCoords:t,numberCoords:n}}(8)}),[]);return Object(r.useEffect)((function(){M(v)&&O(T(C,8))}),[v]),Object(r.useEffect)((function(){M(n)&&c(T(C,8))}),[n]),Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(d.a,{sx:Object(l.a)({},o),children:Object(A.jsxs)(h.a,{sx:Object(l.a)({},s),children:[Object(A.jsx)(W,{name:"computer",nameBoard:"\u043f\u043e\u0438\u0441\u043a \u043a\u043e\u0440\u0430\u0431\u043b\u0435\u0439 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430",compShips:v,gameIsFinished:P,coords:w}),Object(A.jsx)(W,{name:"player",nameBoard:"\u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043c\u043e\u0438\u0445 \u043a\u043e\u0440\u0430\u0431\u043b\u0435\u0439",playerShips:n,gameIsFinished:P,coords:w}),Object(A.jsxs)(h.a,{sx:Object(l.a)({},u),children:[Object(A.jsxs)(h.a,{sx:Object(l.a)({},x),children:[Object(A.jsxs)(h.a,{sx:{display:"flex",margin:"1rem 0"},children:[Object(A.jsx)(h.a,{component:"img",src:b,alt:"\u043b\u043e\u0434\u043a\u0430",sx:{maxWidth:"4rem"}}),Object(A.jsx)(m.a,{component:"p",sx:{textAlign:"center",marginBottom:"1rem"},children:"\u043e\u0434\u043d\u043e\u043a\u043b\u0435\u0442\u043e\u0447\u043d\u044b\u0445 \u043f\u043e 3 \u0448\u0442\u0443\u043a\u0438"})]}),Object(A.jsxs)(h.a,{sx:{display:"flex",marginBottom:"1rem"},children:[Object(A.jsx)(h.a,{component:"img",src:g,alt:"\u044f\u0445\u0442\u0430",sx:{maxWidth:"4rem"}}),Object(A.jsx)(m.a,{component:"p",sx:{textAlign:"center",marginBottom:"1rem"},children:"\u0434\u0432\u0443\u0445\u043a\u043b\u0435\u0442\u043e\u0447\u043d\u044b\u0445 \u043f\u043e 2 \u0448\u0442\u0443\u043a\u0438"})]}),Object(A.jsxs)(h.a,{sx:{display:"flex"},children:[Object(A.jsx)(h.a,{component:"img",src:j,alt:"\u0444\u0440\u0435\u0433\u0430\u0442",sx:{maxWidth:"4rem"}}),Object(A.jsx)(m.a,{component:"p",sx:{textAlign:"center",marginBottom:"1rem"},children:"\u0442\u0440\u0435\u0445\u043a\u043b\u0435\u0442\u043e\u0447\u043d\u044b\u0445 \u043f\u043e 1 \u0448\u0442\u0443\u043a\u0438"})]})]}),Object(A.jsx)(y.a,{onClick:function(){document.location.reload(),c(T(C,8)),O(T(C,8)),E((function(e){return!e}))},variant:"contained",sx:Object(l.a)(Object(l.a)({},f),{},{margin:"3rem 0"}),children:"\u0418\u0433\u0440\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"})]})]})})})};var U=function(){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)("div",{className:"wrap",children:Object(A.jsx)(q,{})})})},H=document.getElementById("root");Object(a.render)(Object(A.jsx)(U,{}),H)}},[[58,1,2]]]);
//# sourceMappingURL=main.3f94aa26.chunk.js.map